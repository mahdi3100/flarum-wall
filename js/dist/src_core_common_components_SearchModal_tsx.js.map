{"version":3,"file":"src_core_common_components_SearchModal_tsx.js","mappings":"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","sources":["webpack://@leo/profile-users-comments/./src/core/common/components/InfoTile.tsx","webpack://@leo/profile-users-comments/./src/core/common/components/SearchModal.tsx","webpack://@leo/profile-users-comments/./src/core/common/utils/KeyboardNavigatable.ts"],"sourcesContent":["import Component from '../Component';\nimport type { ComponentAttrs } from '../Component';\nimport type Mithril from 'mithril';\nimport Icon from './Icon';\nimport classList from '../utils/classList';\n\nexport interface IInfoTileAttrs extends ComponentAttrs {\n  icon?: string;\n  iconElement?: Mithril.Children;\n}\n\nexport default class InfoTile<CustomAttrs extends IInfoTileAttrs = IInfoTileAttrs> extends Component<CustomAttrs> {\n  view(vnode: Mithril.Vnode<CustomAttrs, this>): Mithril.Children {\n    const { icon, className, ...attrs } = vnode.attrs;\n\n    return (\n      <div className={classList('InfoTile', className)} {...attrs}>\n        {this.icon()}\n        <div className=\"InfoTile-text\">{vnode.children}</div>\n      </div>\n    );\n  }\n\n  icon(): Mithril.Children {\n    if (this.attrs.iconElement) return this.attrs.iconElement;\n\n    if (!this.attrs.icon) return null;\n\n    return <Icon name={classList(this.attrs.icon, 'InfoTile-icon')} />;\n  }\n}\n","import app from '../app';\nimport type { IFormModalAttrs } from './FormModal';\nimport FormModal from './FormModal';\nimport type Mithril from 'mithril';\nimport type SearchState from '../states/SearchState';\nimport KeyboardNavigatable from '../utils/KeyboardNavigatable';\nimport SearchManager from '../SearchManager';\nimport extractText from '../utils/extractText';\nimport Input from './Input';\nimport Button from './Button';\nimport Stream from '../utils/Stream';\nimport InfoTile from './InfoTile';\nimport LoadingIndicator from './LoadingIndicator';\nimport type IGambit from '../query/IGambit';\nimport ItemList from '../utils/ItemList';\nimport GambitsAutocomplete from '../utils/GambitsAutocomplete';\nimport type { SearchSource } from './AbstractSearch';\n\nexport interface ISearchModalAttrs extends IFormModalAttrs {\n  onchange: (value: string) => void;\n  searchState: SearchState;\n  sources: SearchSource[];\n}\n\nexport default class SearchModal<CustomAttrs extends ISearchModalAttrs = ISearchModalAttrs> extends FormModal<CustomAttrs> {\n  public static LIMIT = 6;\n\n  protected searchState!: SearchState;\n\n  protected query!: Stream<string>;\n\n  /**\n   * An array of SearchSources.\n   */\n  protected sources!: SearchSource[];\n\n  /**\n   * The key of the currently-active search source.\n   */\n  protected activeSource!: Stream<SearchSource>;\n\n  /**\n   * The sources that are still loading results.\n   */\n  protected loadingSources: string[] = [];\n\n  /**\n   * The index of the currently-selected <li> in the results list. This can be\n   * a unique string (to account for the fact that an item's position may jump\n   * around as new results load), but otherwise it will be numeric (the\n   * sequential position within the list).\n   */\n  protected index: number = 0;\n\n  protected navigator!: KeyboardNavigatable;\n\n  protected searchTimeout?: number;\n\n  protected inputScroll = Stream(0);\n\n  protected gambitsAutocomplete: Record<string, GambitsAutocomplete> = {};\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.searchState = this.attrs.searchState;\n    this.sources = this.attrs.sources;\n    this.activeSource = Stream(\n      this.defaultActiveSource() ? this.sources.find((source) => source.resource === this.defaultActiveSource()) || this.sources[0] : this.sources[0]\n    );\n    this.query = Stream(this.prefill(this.searchState.getValue() || '').trim());\n  }\n\n  title(): Mithril.Children {\n    return app.translator.trans('core.lib.search.title');\n  }\n\n  className(): string {\n    return 'SearchModal Modal--flat';\n  }\n\n  content(): Mithril.Children {\n    this.gambitsAutocomplete[this.activeSource().resource] ||= new GambitsAutocomplete(\n      this.activeSource().resource,\n      () => this.inputElement(),\n      this.query,\n      (value: string) => this.search(value)\n    );\n\n    const searchLabel = extractText(app.translator.trans('core.lib.search.placeholder'));\n\n    return (\n      <div className=\"Modal-body SearchModal-body\">\n        <div className=\"SearchModal-form\">\n          <Input\n            key=\"search\"\n            type=\"search\"\n            loading={!!this.loadingSources.length}\n            clearable={true}\n            clearLabel={app.translator.trans('core.lib.header.search_clear_button_accessible_label')}\n            prefixIcon=\"fas fa-search\"\n            aria-label={searchLabel}\n            placeholder={searchLabel}\n            value={this.query()}\n            onchange={(value: string) => {\n              this.query(value);\n              this.inputScroll(this.inputElement()[0]?.scrollLeft ?? 0);\n            }}\n            inputAttrs={{ className: 'SearchModal-input' }}\n            renderInput={(attrs: any) => (\n              <>\n                <input {...attrs} onscroll={(e: Event) => this.inputScroll((e.target as HTMLInputElement).scrollLeft)} />\n                <div className=\"SearchModal-visual-wrapper\">\n                  <div className=\"SearchModal-visual-input\" style={{ left: '-' + this.inputScroll() + 'px' }}>\n                    {this.gambifyInput()}\n                  </div>\n                </div>\n              </>\n            )}\n          />\n        </div>\n        {this.tabs()}\n      </div>\n    );\n  }\n\n  tabs(): JSX.Element {\n    return (\n      <div className=\"SearchModal-tabs\">\n        <div className=\"SearchModal-tabs-nav\">{this.tabItems().toArray()}</div>\n        <div className=\"SearchModal-tabs-content\">{this.activeTabItems().toArray()}</div>\n      </div>\n    );\n  }\n\n  tabItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    this.sources?.map((source, index) =>\n      items.add(\n        source.resource,\n        <Button className=\"Button Button--link\" active={this.activeSource() === source} onclick={() => this.switchSource(source)}>\n          {source.title()}\n        </Button>,\n        100 - index\n      )\n    );\n\n    return items;\n  }\n\n  activeTabItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    const loading = this.loadingSources.includes(this.activeSource().resource);\n    const shouldShowResults = !!this.query() && !loading;\n    const gambits = this.gambits();\n    const fullPageLink = this.activeSource().fullPage(this.query());\n    const results = this.activeSource()?.view(this.query());\n    const customGrouping = this.activeSource().customGrouping();\n\n    if (shouldShowResults && fullPageLink) {\n      items.add(\n        'fullPageLink',\n        <div className=\"SearchModal-section\">\n          <hr className=\"Modal-divider\" />\n          <ul className=\"Dropdown-menu SearchModal-fullPage\">{fullPageLink}</ul>\n        </div>,\n        80\n      );\n    }\n\n    if (!!gambits.length) {\n      items.add(\n        'gambits',\n        <div className=\"SearchModal-section\">\n          <hr className=\"Modal-divider\" />\n          <ul className=\"Dropdown-menu SearchModal-options\" aria-live={gambits.length ? 'polite' : undefined}>\n            <li className=\"Dropdown-header\">{app.translator.trans('core.lib.search.options_heading')}</li>\n            {gambits}\n          </ul>\n        </div>,\n        60\n      );\n    }\n\n    items.add(\n      'results',\n      <div className=\"SearchModal-section\">\n        <hr className=\"Modal-divider\" />\n        <ul className=\"Dropdown-menu SearchModal-results\" aria-live={shouldShowResults ? 'polite' : undefined}>\n          {!customGrouping && <li className=\"Dropdown-header\">{app.translator.trans('core.lib.search.preview_heading')}</li>}\n          {!shouldShowResults && (\n            <li className=\"Dropdown-message\">\n              <InfoTile icon=\"fas fa-search\">{app.translator.trans('core.lib.search.no_search_text')}</InfoTile>\n            </li>\n          )}\n          {shouldShowResults && results}\n          {shouldShowResults && !results?.length && (\n            <li className=\"Dropdown-message\">\n              <InfoTile icon=\"far fa-tired\">{app.translator.trans('core.lib.search.no_results_text')}</InfoTile>\n            </li>\n          )}\n          {loading && (\n            <li className=\"Dropdown-message\">\n              <LoadingIndicator />\n            </li>\n          )}\n        </ul>\n      </div>,\n      40\n    );\n\n    return items;\n  }\n\n  switchSource(source: SearchSource) {\n    if (this.activeSource() !== source) {\n      this.activeSource(source);\n      this.search(this.query());\n      this.inputElement().focus();\n      m.redraw();\n    }\n  }\n\n  gambits(): JSX.Element[] {\n    return this.gambitsAutocomplete[this.activeSource().resource].suggestions(this.query());\n  }\n\n  /**\n   * Transforms a simple search text to wrap valid gambits in a mark tag.\n   * @example `lorem ipsum is:unread dolor` => `lorem ipsum <mark>is:unread</mark> dolor`\n   */\n  gambifyInput(): Mithril.Children {\n    const query = this.query();\n    let marked = query;\n\n    app.search.gambits.match(this.activeSource().resource, query, (gambit: IGambit, matches: string[], negate: boolean, bit: string) => {\n      marked = marked.replace(bit, `<mark>${bit}</mark>`);\n    });\n\n    const jsx: Mithril.ChildArray = [];\n    marked.split(/(<mark>.*?<\\/mark>)/).forEach((chunk) => {\n      if (chunk.startsWith('<mark>')) {\n        jsx.push(<mark>{chunk.replace(/<\\/?mark>/g, '')}</mark>);\n      } else {\n        jsx.push(chunk);\n      }\n    });\n\n    return jsx;\n  }\n\n  onupdate(vnode: Mithril.VnodeDOM<CustomAttrs, this>) {\n    super.onupdate(vnode);\n\n    // Highlight the item that is currently selected.\n    this.setIndex(this.getCurrentNumericIndex());\n\n    const component = this;\n    this.$('.Dropdown-menu')\n      // Whenever the mouse is hovered over a search result, highlight it.\n      .on('mouseenter', '> li:not(.Dropdown-header):not(.Dropdown-message)', function () {\n        component.setIndex(component.selectableItems().index(this));\n      });\n\n    // If there are no sources, the search view is not shown.\n    if (!this.sources?.length) return;\n  }\n\n  oncreate(vnode: Mithril.VnodeDOM<CustomAttrs, this>) {\n    super.oncreate(vnode);\n\n    // If there are no sources, we shouldn't initialize logic for\n    // search elements, as they will not be shown.\n    if (!this.sources?.length) return;\n\n    const search = this.search.bind(this);\n\n    // Highlight the item that is currently selected.\n    this.setIndex(this.getCurrentNumericIndex());\n\n    const $input = this.inputElement() as JQuery<HTMLInputElement>;\n\n    this.navigator = new KeyboardNavigatable();\n    this.navigator\n      .onUp(() => this.setIndex(this.getCurrentNumericIndex() - 1, true))\n      .onDown(() => this.setIndex(this.getCurrentNumericIndex() + 1, true))\n      .onSelect(this.selectResult.bind(this), true)\n      .onCancel(this.clear.bind(this))\n      .bindTo($input);\n\n    // Handle input key events on the search input, triggering results to load.\n    $input.on('input focus', function () {\n      search(this.value.toLowerCase());\n    });\n  }\n\n  onremove(vnode: Mithril.VnodeDOM<CustomAttrs, this>) {\n    this.searchState.setValue(this.query());\n    super.onremove(vnode);\n  }\n\n  search(query: string) {\n    if (!query) return;\n\n    const source = this.activeSource();\n\n    if (this.searchTimeout) clearTimeout(this.searchTimeout);\n\n    this.searchTimeout = window.setTimeout(() => {\n      if (source.isCached(query)) return;\n\n      if (query.length >= SearchManager.MIN_SEARCH_LEN) {\n        if (!source.search) return;\n\n        this.loadingSources.push(source.resource);\n\n        source.search(query, SearchModal.LIMIT).then(() => {\n          this.loadingSources = this.loadingSources.filter((resource) => resource !== source.resource);\n          m.redraw();\n        });\n      }\n\n      this.searchState.cache(query);\n      m.redraw();\n    }, 250);\n  }\n\n  /**\n   * Navigate to the currently selected search result and close the list.\n   */\n  selectResult() {\n    if (this.searchTimeout) clearTimeout(this.searchTimeout);\n\n    this.loadingSources = [];\n\n    const item = this.getItem(this.index);\n    const isResult = !!item.attr('data-id');\n    let selectedUrl = null;\n\n    if (isResult) {\n      const id = item.attr('data-id');\n      selectedUrl = id && this.activeSource().gotoItem(id as string);\n    } else if (item.find('a').length) {\n      selectedUrl = item.find('a').attr('href');\n    }\n\n    const query = this.query();\n\n    if (query && selectedUrl) {\n      m.route.set(selectedUrl);\n    } else {\n      item.find('button')[0].click();\n    }\n  }\n\n  /**\n   * Clear the search\n   */\n  clear() {\n    this.query('');\n  }\n\n  /**\n   * Get all of the search result items that are selectable.\n   */\n  selectableItems(): JQuery {\n    return this.$('.Dropdown-menu > li:not(.Dropdown-header):not(.Dropdown-message)');\n  }\n\n  /**\n   * Get the position of the currently selected search result item.\n   * Returns zero if not found.\n   */\n  getCurrentNumericIndex(): number {\n    return Math.max(0, this.selectableItems().index(this.getItem(this.index)));\n  }\n\n  /**\n   * Get the <li> in the search results with the given index (numeric or named).\n   */\n  getItem(index: number): JQuery {\n    const $items = this.selectableItems();\n    let $item = $items.filter(`[data-index=\"${index}\"]`);\n\n    if (!$item.length) {\n      $item = $items.eq(index);\n    }\n\n    return $item;\n  }\n\n  /**\n   * Set the currently-selected search result item to the one with the given\n   * index.\n   */\n  setIndex(index: number, scrollToItem: boolean = false) {\n    const $items = this.selectableItems();\n    const $dropdown = $items.parent();\n\n    let fixedIndex = index;\n    if (index < 0) {\n      fixedIndex = $items.length - 1;\n    } else if (index >= $items.length) {\n      fixedIndex = 0;\n    }\n\n    const $item = $items.removeClass('active').eq(fixedIndex).addClass('active');\n\n    this.index = parseInt($item.attr('data-index') as string) || fixedIndex;\n\n    if (scrollToItem && $dropdown) {\n      const dropdownScroll = $dropdown.scrollTop()!;\n      const dropdownTop = $dropdown.offset()!.top;\n      const dropdownBottom = dropdownTop + $dropdown.outerHeight()!;\n      const itemTop = $item.offset()!.top;\n      const itemBottom = itemTop + $item.outerHeight()!;\n\n      let scrollTop;\n      if (itemTop < dropdownTop) {\n        scrollTop = dropdownScroll - dropdownTop + itemTop - parseInt($dropdown.css('padding-top'), 10);\n      } else if (itemBottom > dropdownBottom) {\n        scrollTop = dropdownScroll - dropdownBottom + itemBottom + parseInt($dropdown.css('padding-bottom'), 10);\n      }\n\n      if (typeof scrollTop !== 'undefined') {\n        $dropdown.stop(true).animate({ scrollTop }, 100);\n      }\n    }\n  }\n\n  inputElement(): JQuery<HTMLInputElement> {\n    return this.$('.SearchModal-input') as JQuery<HTMLInputElement>;\n  }\n\n  defaultActiveSource(): string | null {\n    const inDiscussion =\n      app.current.data.routeName && ['discussion', 'discussion.near'].includes(app.current.data.routeName) && app.current.data.discussion;\n    const inUser = app.current.data.routeName && app.current.data.routeName.includes('user.posts') && app.current.data.user;\n    const inPosts = app.current.data.routeName && app.current.data.routeName === 'posts';\n\n    if (inDiscussion || inUser || inPosts) {\n      return 'posts';\n    }\n\n    return null;\n  }\n\n  defaultFilters(): Record<string, Record<string, any>> {\n    const filters: Record<string, Record<string, any>> = {};\n\n    this.sources.forEach((source) => {\n      filters[source.resource] = {};\n    });\n\n    if (app.current.data.routeName && ['discussion', 'discussion.near'].includes(app.current.data.routeName) && app.current.data.discussion) {\n      filters.posts.discussion = app.current.data.discussion.id();\n    }\n\n    if (app.current.data.routeName && app.current.data.routeName.includes('user.posts') && app.current.data.user) {\n      filters.posts.author = app.current.data.user.username();\n    }\n\n    return filters;\n  }\n\n  prefill(value: string): string {\n    const newQuery = app.search.gambits.from(this.activeSource().resource, value, this.defaultFilters()[this.activeSource().resource] || {});\n\n    if (!value.includes(newQuery.replace(value, '').trim())) {\n      return newQuery;\n    }\n\n    return value;\n  }\n}\n","type KeyboardEventHandler = (event: KeyboardEvent) => void;\ntype ShouldHandle = (event: KeyboardEvent) => boolean;\n\nenum Keys {\n  Enter = 13,\n  Escape = 27,\n  Space = 32,\n  ArrowUp = 38,\n  ArrowDown = 40,\n  ArrowLeft = 37,\n  ArrowRight = 39,\n  Tab = 9,\n  Backspace = 8,\n}\n\n/**\n * The `KeyboardNavigatable` class manages lists that can be navigated with the\n * keyboard, calling callbacks for each actions.\n *\n * This helper encapsulates the key binding logic, providing a simple fluent\n * API for use.\n */\nexport default class KeyboardNavigatable {\n  /**\n   * Callback to be executed for a specified input.\n   */\n  protected callbacks = new Map<number, KeyboardEventHandler>();\n\n  /**\n   * Callback that determines whether keyboard input should be handled.\n   * By default, always handle keyboard navigation.\n   */\n  protected whenCallback: ShouldHandle = (event: KeyboardEvent) => true;\n\n  /**\n   * Provide a callback to be executed when navigating upwards.\n   *\n   * This will be triggered by the Up key.\n   */\n  onUp(callback: KeyboardEventHandler): KeyboardNavigatable {\n    return this.onDirection(callback, Keys.ArrowUp);\n  }\n\n  /**\n   * Provide a callback to be executed when navigating downwards.\n   *\n   * This will be triggered by the Down key.\n   */\n  onDown(callback: KeyboardEventHandler): KeyboardNavigatable {\n    return this.onDirection(callback, Keys.ArrowDown);\n  }\n\n  /**\n   * Provide a callback to be executed when navigating leftwards.\n   *\n   * This will be triggered by the Left key.\n   */\n  onLeft(callback: KeyboardEventHandler): KeyboardNavigatable {\n    return this.onDirection(callback, Keys.ArrowLeft);\n  }\n\n  /**\n   * Provide a callback to be executed when navigating rightwards.\n   *\n   * This will be triggered by the Right key.\n   */\n  onRight(callback: KeyboardEventHandler): KeyboardNavigatable {\n    return this.onDirection(callback, Keys.ArrowRight);\n  }\n\n  onDirection(callback: KeyboardEventHandler, direction: Keys): KeyboardNavigatable {\n    this.callbacks.set(direction, (e) => {\n      e.preventDefault();\n      callback(e);\n    });\n\n    return this;\n  }\n\n  /**\n   * Provide a callback to be executed when the current item is selected..\n   *\n   * This will be triggered by the Return key (and Tab key, if not disabled).\n   */\n  onSelect(callback: KeyboardEventHandler, ignoreTabPress: boolean = false): KeyboardNavigatable {\n    const handler: KeyboardEventHandler = (e) => {\n      e.preventDefault();\n      callback(e);\n    };\n\n    if (!ignoreTabPress) this.callbacks.set(Keys.Tab, handler);\n    this.callbacks.set(Keys.Enter, handler);\n\n    return this;\n  }\n\n  /**\n   * Provide a callback to be executed when the current item is tabbed into.\n   *\n   * This will be triggered by the Tab key.\n   */\n  onTab(callback: KeyboardEventHandler): KeyboardNavigatable {\n    const handler: KeyboardEventHandler = (e) => {\n      e.preventDefault();\n      callback(e);\n    };\n\n    this.callbacks.set(9, handler);\n\n    return this;\n  }\n\n  /**\n   * Provide a callback to be executed when the navigation is canceled.\n   *\n   * This will be triggered by the Escape key.\n   */\n  onCancel(callback: KeyboardEventHandler): KeyboardNavigatable {\n    this.callbacks.set(Keys.Escape, (e) => {\n      e.stopPropagation();\n      e.preventDefault();\n      callback(e);\n    });\n\n    return this;\n  }\n\n  /**\n   * Provide a callback to be executed when previous input is removed.\n   *\n   * This will be triggered by the Backspace key.\n   */\n  onRemove(callback: KeyboardEventHandler): KeyboardNavigatable {\n    this.callbacks.set(Keys.Backspace, (e) => {\n      if (e instanceof KeyboardEvent && e.target instanceof HTMLInputElement && e.target.selectionStart === 0 && e.target.selectionEnd === 0) {\n        callback(e);\n        e.preventDefault();\n      }\n    });\n\n    return this;\n  }\n\n  /**\n   * Provide a callback that determines whether keyboard input should be handled.\n   */\n  when(callback: ShouldHandle): KeyboardNavigatable {\n    this.whenCallback = callback;\n\n    return this;\n  }\n\n  /**\n   * Set up the navigation key bindings on the given jQuery element.\n   */\n  bindTo($element: JQuery<HTMLElement>) {\n    // Handle navigation key events on the navigatable element.\n    $element[0].addEventListener('keydown', this.navigate.bind(this));\n  }\n\n  /**\n   * Interpret the given keyboard event as navigation commands.\n   */\n  navigate(event: KeyboardEvent) {\n    // This callback determines whether keyboard should be handled or ignored.\n    if (!this.whenCallback(event)) return;\n\n    const keyCallback = this.callbacks.get(event.which);\n    if (keyCallback) {\n      keyCallback(event);\n    }\n  }\n}\n"],"names":["Component","Icon","classList","InfoTile","_Component","apply","arguments","_inheritsLoose","_proto","prototype","view","vnode","_vnode$attrs","attrs","icon","className","_objectWithoutPropertiesLoose","_excluded","m","Object","assign","children","iconElement","name","default","app","FormModal","KeyboardNavigatable","SearchManager","extractText","Input","Button","Stream","LoadingIndicator","ItemList","GambitsAutocomplete","SearchModal","_FormModal","_this","_len","length","args","Array","_key","call","concat","searchState","query","sources","activeSource","loadingSources","index","navigator","searchTimeout","inputScroll","gambitsAutocomplete","oninit","_this2","defaultActiveSource","find","source","resource","prefill","getValue","trim","title","translator","trans","content","_this$gambitsAutocomp","_this$activeSource$re","_this3","inputElement","value","search","searchLabel","key","type","loading","clearable","clearLabel","prefixIcon","placeholder","onchange","_this3$inputElement$","_this3$inputElement$2","scrollLeft","inputAttrs","renderInput","'['","onscroll","e","target","style","left","gambifyInput","tabs","tabItems","toArray","activeTabItems","_this$sources","_this4","items","map","add","active","onclick","switchSource","_this$activeSource","includes","shouldShowResults","gambits","fullPageLink","fullPage","results","customGrouping","undefined","focus","redraw","suggestions","marked","match","gambit","matches","negate","bit","replace","jsx","split","forEach","chunk","startsWith","push","onupdate","_this$sources2","setIndex","getCurrentNumericIndex","component","$","on","selectableItems","oncreate","_this$sources3","_this5","bind","$input","onUp","onDown","onSelect","selectResult","onCancel","clear","bindTo","toLowerCase","onremove","setValue","_this6","clearTimeout","window","setTimeout","isCached","MIN_SEARCH_LEN","LIMIT","then","filter","cache","item","getItem","isResult","attr","selectedUrl","id","gotoItem","route","set","click","Math","max","$items","$item","eq","scrollToItem","$dropdown","parent","fixedIndex","removeClass","addClass","parseInt","dropdownScroll","scrollTop","dropdownTop","offset","top","dropdownBottom","outerHeight","itemTop","itemBottom","css","stop","animate","inDiscussion","current","data","routeName","discussion","inUser","user","inPosts","defaultFilters","filters","posts","author","username","newQuery","from","Keys","callbacks","Map","whenCallback","event","callback","onDirection","ArrowUp","ArrowDown","onLeft","ArrowLeft","onRight","ArrowRight","direction","preventDefault","ignoreTabPress","handler","Tab","Enter","onTab","Escape","stopPropagation","onRemove","Backspace","KeyboardEvent","HTMLInputElement","selectionStart","selectionEnd","when","$element","addEventListener","navigate","keyCallback","get","which"],"sourceRoot":""}