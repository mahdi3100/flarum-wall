{"version":3,"file":"src_core_forum_components_Composer_js.js","mappings":"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","sources":["webpack://@leo/profile-users-comments/./src/core/forum/components/Composer.js","webpack://@leo/profile-users-comments/./src/core/forum/components/ComposerButton.js"],"sourcesContent":["import app from '../../forum/app';\nimport Component from '../../common/Component';\nimport ItemList from '../../common/utils/ItemList';\nimport ComposerButton from './ComposerButton';\nimport listItems from '../../common/helpers/listItems';\nimport classList from '../../common/utils/classList';\nimport ComposerState from '../states/ComposerState';\n\n/**\n * The `Composer` component displays the composer. It can be loaded with a\n * content component with `load` and then its position/state can be altered with\n * `show`, `hide`, `close`, `minimize`, `fullScreen`, and `exitFullScreen`.\n */\nexport default class Composer extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    /**\n     * The composer's \"state\".\n     *\n     * @type {ComposerState}\n     */\n    this.state = this.attrs.state;\n\n    /**\n     * Whether or not the composer currently has focus.\n     *\n     * @type {Boolean}\n     */\n    this.active = false;\n\n    // Store the initial position so that we can trigger animations correctly.\n    this.prevPosition = this.state.position;\n  }\n\n  view() {\n    const body = this.state.body;\n    const classes = {\n      normal: this.state.position === ComposerState.Position.NORMAL,\n      minimized: this.state.position === ComposerState.Position.MINIMIZED,\n      fullScreen: this.state.position === ComposerState.Position.FULLSCREEN,\n      active: this.active,\n      visible: this.state.isVisible(),\n    };\n\n    // Set up a handler so that clicks on the content will show the composer.\n    const showIfMinimized = this.state.position === ComposerState.Position.MINIMIZED ? this.state.show.bind(this.state) : undefined;\n\n    const ComposerBody = body.componentClass;\n\n    return (\n      <div className={'Composer ' + classList(classes)}>\n        <div className=\"Composer-handle\" oncreate={this.configHandle.bind(this)} />\n        <ul className=\"Composer-controls\">{listItems(this.controlItems().toArray())}</ul>\n        <div className=\"Composer-content\" onclick={showIfMinimized}>\n          {ComposerBody && <ComposerBody {...body.attrs} composer={this.state} disabled={classes.minimized} />}\n        </div>\n      </div>\n    );\n  }\n\n  onupdate(vnode) {\n    super.onupdate(vnode);\n\n    if (this.state.position === this.prevPosition) {\n      // Set the height of the Composer element and its contents on each redraw,\n      // so that they do not lose it if their DOM elements are recreated.\n      this.updateHeight();\n    } else {\n      this.animatePositionChange();\n\n      this.prevPosition = this.state.position;\n    }\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    this.initializeHeight();\n    this.$().hide().css('bottom', -this.state.computedHeight());\n\n    // Whenever any of the inputs inside the composer are have focus, we want to\n    // add a class to the composer to draw attention to it.\n    this.$().on('focus blur', ':input,.TextEditor-editorContainer', (e) => {\n      this.active = e.type === 'focusin';\n      m.redraw();\n    });\n\n    // When the escape key is pressed on any inputs, close the composer.\n    this.$().on('keydown', ':input,.TextEditor-editorContainer', 'esc', () => this.state.close());\n\n    this.handlers = {};\n\n    $(window)\n      .on('resize', (this.handlers.onresize = this.updateHeight.bind(this)))\n      .resize();\n\n    $(document)\n      .on('mousemove', (this.handlers.onmousemove = this.onmousemove.bind(this)))\n      .on('mouseup', (this.handlers.onmouseup = this.onmouseup.bind(this)));\n  }\n\n  onremove(vnode) {\n    super.onremove(vnode);\n\n    $(window).off('resize', this.handlers.onresize);\n\n    $(document).off('mousemove', this.handlers.onmousemove).off('mouseup', this.handlers.onmouseup);\n  }\n\n  /**\n   * Add the necessary event handlers to the composer's handle so that it can\n   * be used to resize the composer.\n   */\n  configHandle(vnode) {\n    const composer = this;\n\n    $(vnode.dom)\n      .css('cursor', 'row-resize')\n      .bind('dragstart mousedown', (e) => e.preventDefault())\n      .mousedown(function (e) {\n        composer.mouseStart = e.clientY;\n        composer.heightStart = composer.$().height();\n        composer.handle = $(this);\n        $('body').css('cursor', 'row-resize');\n      });\n  }\n\n  /**\n   * Resize the composer according to mouse movement.\n   *\n   * @param {MouseEvent} e\n   */\n  onmousemove(e) {\n    if (!this.handle) return;\n\n    // Work out how much the mouse has been moved, and set the height\n    // relative to the old one based on that. Then update the content's\n    // height so that it fills the height of the composer, and update the\n    // body's padding.\n    const deltaPixels = this.mouseStart - e.clientY;\n    this.changeHeight(this.heightStart + deltaPixels);\n\n    // Update the body's padding-bottom so that no content on the page will ever\n    // get permanently hidden behind the composer. If the user is already\n    // scrolled to the bottom of the page, then we will keep them scrolled to\n    // the bottom after the padding has been updated.\n    const scrollTop = $(window).scrollTop();\n    const anchorToBottom = scrollTop > 0 && scrollTop + $(window).height() >= $(document).height();\n    this.updateBodyPadding(anchorToBottom);\n  }\n\n  /**\n   * Finish resizing the composer when the mouse is released.\n   */\n  onmouseup() {\n    if (!this.handle) return;\n\n    this.handle = null;\n    $('body').css('cursor', '');\n  }\n\n  /**\n   * Draw focus to the first focusable content element (the text editor).\n   */\n  focus() {\n    this.$(this.attrs.state.body.componentClass.focusOnSelector?.() || '.Composer-content :input:enabled:visible, .TextEditor-editor')\n      .first()\n      .focus();\n  }\n\n  /**\n   * Update the DOM to reflect the composer's current height. This involves\n   * setting the height of the composer's root element, and adjusting the height\n   * of any flexible elements inside the composer's body.\n   */\n  updateHeight() {\n    const height = this.state.computedHeight();\n    const $flexible = this.$('.Composer-flexible');\n\n    this.$().height(height);\n\n    if ($flexible.length) {\n      const headerHeight = $flexible.offset().top - this.$().offset().top;\n      const paddingBottom = parseInt($flexible.css('padding-bottom'), 10);\n      const footerHeight = this.$('.Composer-footer').outerHeight(true);\n\n      $flexible.height(this.$().outerHeight() - headerHeight - paddingBottom - footerHeight);\n    }\n  }\n\n  /**\n   * Update the amount of padding-bottom on the body so that the page's\n   * content will still be visible above the composer when the page is\n   * scrolled right to the bottom.\n   */\n  updateBodyPadding() {\n    const visible =\n      this.state.position !== ComposerState.Position.HIDDEN && this.state.position !== ComposerState.Position.MINIMIZED && app.screen() !== 'phone';\n\n    const paddingBottom = visible ? this.state.computedHeight() - parseInt($('#app').css('padding-bottom'), 10) : 0;\n\n    $('#content').css({ paddingBottom });\n  }\n\n  /**\n   * Trigger the right animation depending on the desired new position.\n   */\n  animatePositionChange() {\n    // When exiting full-screen mode: focus content\n    if (this.prevPosition === ComposerState.Position.FULLSCREEN && this.state.position === ComposerState.Position.NORMAL) {\n      this.focus();\n      return;\n    }\n\n    switch (this.state.position) {\n      case ComposerState.Position.HIDDEN:\n        return this.hide();\n      case ComposerState.Position.MINIMIZED:\n        return this.minimize();\n      case ComposerState.Position.FULLSCREEN:\n        return this.focus();\n      case ComposerState.Position.NORMAL:\n        return this.show();\n    }\n  }\n\n  /**\n   * Animate the Composer into the new position by changing the height.\n   */\n  animateHeightChange() {\n    const $composer = this.$().stop(true);\n    const oldHeight = $composer.outerHeight();\n    const scrollTop = $(window).scrollTop();\n\n    $composer.show();\n    this.updateHeight();\n\n    const newHeight = $composer.outerHeight();\n\n    if (this.prevPosition === ComposerState.Position.HIDDEN) {\n      $composer.css({ bottom: -newHeight, height: newHeight });\n    } else {\n      $composer.css({ height: oldHeight });\n    }\n\n    const animation = $composer.animate({ bottom: 0, height: newHeight }, 'fast').promise();\n\n    this.updateBodyPadding();\n    $(window).scrollTop(scrollTop);\n    return animation;\n  }\n\n  /**\n   * Show the Composer backdrop.\n   */\n  showBackdrop() {\n    this.$backdrop = $('<div/>').addClass('composer-backdrop').appendTo('body');\n  }\n\n  /**\n   * Hide the Composer backdrop.\n   */\n  hideBackdrop() {\n    if (this.$backdrop) this.$backdrop.remove();\n  }\n\n  /**\n   * Animate the composer sliding up from the bottom to take its normal height.\n   *\n   * @private\n   */\n  show() {\n    this.animateHeightChange().then(() => this.focus());\n\n    if (app.screen() === 'phone') {\n      // On safari fixed position doesn't properly work on mobile,\n      // So we use absolute and set the top value.\n      // https://github.com/flarum/core/issues/2652\n\n      // Due to another safari bug, `scrollTop` is unreliable when\n      // at the very bottom of the page AND opening the composer.\n      // So we fallback to a calculated version of scrollTop.\n      // https://github.com/flarum/core/issues/2683\n      const scrollElement = document.documentElement;\n      const topOfViewport = Math.min(scrollElement.scrollTop, scrollElement.scrollHeight - scrollElement.clientHeight);\n      this.$().css('top', $('.App').is('.mobile-safari') ? topOfViewport : 0);\n      this.showBackdrop();\n    }\n  }\n\n  /**\n   * Animate closing the composer.\n   *\n   * @private\n   */\n  hide() {\n    const $composer = this.$();\n\n    // Animate the composer sliding down off the bottom edge of the viewport.\n    // Only when the animation is completed, update other elements on the page.\n    $composer.stop(true).animate({ bottom: -$composer.height() }, 'fast', () => {\n      $composer.hide();\n      this.hideBackdrop();\n      this.updateBodyPadding();\n    });\n  }\n\n  /**\n   * Shrink the composer until only its title is visible.\n   *\n   * @private\n   */\n  minimize() {\n    this.animateHeightChange();\n\n    this.$().css('top', 'auto');\n    this.hideBackdrop();\n  }\n\n  /**\n   * Build an item list for the composer's controls.\n   *\n   * @return {ItemList<import('mithril').Children>}\n   */\n  controlItems() {\n    const items = new ItemList();\n\n    if (this.state.position === ComposerState.Position.FULLSCREEN) {\n      items.add(\n        'exitFullScreen',\n        <ComposerButton\n          icon=\"fas fa-compress\"\n          title={app.translator.trans('core.forum.composer.exit_full_screen_tooltip')}\n          onclick={this.state.exitFullScreen.bind(this.state)}\n        />\n      );\n    } else {\n      if (this.state.position !== ComposerState.Position.MINIMIZED) {\n        items.add(\n          'minimize',\n          <ComposerButton\n            icon={classList('fas minimize', {\n              'fa-minus': app.screen() !== 'phone',\n              'fa-times': app.screen() === 'phone',\n            })}\n            title={app.translator.trans('core.forum.composer.minimize_tooltip')}\n            onclick={this.state.minimize.bind(this.state)}\n            itemClassName=\"App-backControl\"\n          />\n        );\n\n        items.add(\n          'fullScreen',\n          <ComposerButton\n            icon=\"fas fa-expand\"\n            title={app.translator.trans('core.forum.composer.full_screen_tooltip')}\n            onclick={this.state.fullScreen.bind(this.state)}\n          />\n        );\n      }\n\n      items.add(\n        'close',\n        <ComposerButton\n          icon=\"fas fa-times\"\n          title={app.translator.trans('core.forum.composer.close_tooltip')}\n          onclick={this.state.close.bind(this.state)}\n        />\n      );\n    }\n\n    return items;\n  }\n\n  /**\n   * Initialize default Composer height.\n   */\n  initializeHeight() {\n    this.state.height = localStorage.getItem('composerHeight');\n\n    if (!this.state.height) {\n      this.state.height = this.defaultHeight();\n    }\n  }\n\n  /**\n   * Default height of the Composer in case none is saved.\n   * @returns {number}\n   */\n  defaultHeight() {\n    return this.$().height();\n  }\n\n  /**\n   * Save a new Composer height and update the DOM.\n   * @param {number} height\n   */\n  changeHeight(height) {\n    this.state.height = height;\n    this.updateHeight();\n\n    localStorage.setItem('composerHeight', this.state.height);\n  }\n}\n","import Button from '../../common/components/Button';\n\n/**\n * The `ComposerButton` component displays a button suitable for the composer\n * controls.\n */\nexport default class ComposerButton extends Button {\n  static initAttrs(attrs) {\n    super.initAttrs(attrs);\n\n    attrs.className = attrs.className || 'Button Button--icon Button--link';\n  }\n}\n"],"names":["app","Component","ItemList","ComposerButton","listItems","classList","ComposerState","Composer","_Component","apply","arguments","_inheritsLoose","_proto","prototype","oninit","vnode","call","state","attrs","active","prevPosition","position","view","body","classes","normal","Position","NORMAL","minimized","MINIMIZED","fullScreen","FULLSCREEN","visible","isVisible","showIfMinimized","show","bind","undefined","ComposerBody","componentClass","m","className","oncreate","configHandle","controlItems","toArray","onclick","Object","assign","composer","disabled","onupdate","updateHeight","animatePositionChange","_this","initializeHeight","$","hide","css","computedHeight","on","e","type","redraw","close","handlers","window","onresize","resize","document","onmousemove","onmouseup","onremove","off","dom","preventDefault","mousedown","mouseStart","clientY","heightStart","height","handle","deltaPixels","changeHeight","scrollTop","anchorToBottom","updateBodyPadding","focus","_this$attrs$state$bod","_this$attrs$state$bod2","focusOnSelector","first","$flexible","length","headerHeight","offset","top","paddingBottom","parseInt","footerHeight","outerHeight","HIDDEN","screen","minimize","animateHeightChange","$composer","stop","oldHeight","newHeight","bottom","animation","animate","promise","showBackdrop","$backdrop","addClass","appendTo","hideBackdrop","remove","_this2","then","scrollElement","documentElement","topOfViewport","Math","min","scrollHeight","clientHeight","is","_this3","items","add","icon","title","translator","trans","exitFullScreen","itemClassName","localStorage","getItem","defaultHeight","setItem","default","Button","_Button","initAttrs"],"sourceRoot":""}